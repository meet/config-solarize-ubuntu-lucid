# Localization
d-i debian-installer/locale string en_US
d-i console-setup/ask_detect boolean false
d-i console-setup/layoutcode string us

# Network configuration
d-i netcfg/choose_interface select eth2
d-i netcfg/disable_dhcp boolean true
d-i netcfg/get_nameservers string 80.179.52.100
d-i netcfg/get_ipaddress string 10.0.0.151
d-i netcfg/get_netmask string 255.0.0.0
d-i netcfg/get_gateway string 10.0.0.138
d-i netcfg/confirm_static boolean true

d-i netcfg/get_hostname string solarize
d-i netcfg/get_domain string meet

# Mirror settings
d-i mirror/country string manual
d-i mirror/http/hostname string mirror.isoc.org.il
d-i mirror/http/directory string /pub/ubuntu
d-i mirror/http/proxy string

# Clock and time zone setup
d-i clock-setup/utc boolean true
d-i time/zone string Asia/Jerusalem

# Partitioning
d-i partman-auto/disk string /dev/sda
d-i partman-auto/method string regular
d-i partman-auto/choose_recipe select home
#d-i partman/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
#d-i partman/confirm boolean true

# Account setup
d-i passwd/make-user boolean false
d-i passwd/root-login boolean true
# XXX disable
d-i passwd/root-password-crypted password $1$lmzK2azX$hBPu9uJAUy.husmTNLALG.

# Apt setup
d-i apt-setup/restricted boolean true
d-i apt-setup/universe boolean true
d-i apt-setup/partner boolean true

# Package selection
tasksel tasksel/first multiselect ubuntu-desktop
d-i pkgsel/update-policy select unattended-upgrades
d-i pkgsel/include string \
    autofs nfs-common quota \
    debconf-utils \
    exim4 \
    flashplugin-installer msttcorefonts \
    gimp \
    git-core \
    libpam-ldap libnss-ldap \
    mercurial \
    openssh-server \
    ruby rubygems \
    sun-java6-jdk \
    tomcat6-user tomcat6-docs

exim4-config	exim4/dc_eximconfig_configtype	select	mail sent by smarthost; no local mail
exim4-config	exim4/dc_postmaster		string	
exim4-config	exim4/dc_smarthost		string	meet.mit.edu
exim4-config	exim4/mailname			string	meet.mit.edu
exim4-config	exim4/dc_readhost		string	meet.mit.edu
exim4-config	exim4/dc_local_interfaces	string	127.0.0.1 ; ::1
exim4-config	exim4/dc_relay_nets	string	192.168.0.0/16

ldap-auth-config ldap-auth-config/ldapns/ldap-server string ldap://127.0.0.1/ ldaps://meet.mit.edu/
ldap-auth-config ldap-auth-config/ldapns/base-dn string dc=meet,dc=csail,dc=mit,dc=edu
ldap-auth-config ldap-auth-config/ldapns/ldap_version select 3
ldap-auth-config ldap-auth-config/dblogin boolean false
ldap-auth-config ldap-auth-config/dbrootlogin boolean false

sun-java6-bin shared/accepted-sun-dlj-v1-1 boolean true
sun-java6-jdk shared/accepted-sun-dlj-v1-1 boolean true
sun-java6-jre shared/accepted-sun-dlj-v1-1 boolean true
sun-java6-jre sun-java6-jre/jcepolicy note	
sun-java6-bin shared/present-sun-dlj-v1-1 note	
sun-java6-jdk shared/present-sun-dlj-v1-1 note	
sun-java6-jre shared/present-sun-dlj-v1-1 note	

# Finishing up the installation
d-i preseed/late_command string \
    in-target wget http://github.com/meet/config-solarize-ubuntu-lucid/raw/gh-pages/late_command.sh ; \
    in-target bash late_command.sh ; \
    in-target rm late_command.sh
d-i finish-install/reboot_in_progress note
